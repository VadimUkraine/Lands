var matrix=[[0,0,1,0],[1,0,1,1],[0,0,0,1],[1,0,0,0],[0,1,0,0]];function addMap(){var t=document.getElementsByClassName("map_wrap")[0];if(t.hasChildNodes())return!1;var a="";t.classList.remove("border");for(var r=0;r<matrix.length;r++){var e=matrix[r],n=document.createElement("div");n.className="row";for(var m=0;m<e.length;m++)a=0===e[m]?"aqua":"land",n.innerHTML+='<p class="'+a+'"></p>',t.appendChild(n)}calcLands()}function calcLands(){for(var t=matrix.length,a=matrix[0].length,r=0,e=[],n=0,m=0,i=function(t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1},d=0;d<t;d++)for(var l=0;l<a;l++)matrix[d][l]&&(n=0<l?matrix[d][l-1]:0,m=0<d?matrix[d-1][l]:0,n||m?n&&!m?matrix[d][l]=n:!n&&m?matrix[d][l]=m:n&&m&&1!==m&&!i(m)&&(matrix[d][l]=n,e.push(m)):(r++,matrix[d][l]=r));return document.getElementById("result_map").textContent="Количество островов: "+(r-e.length)}var btn=document.getElementById("btn_map");btn.addEventListener("click",addMap);